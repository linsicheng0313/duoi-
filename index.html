<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å°å¿ƒï¼Duoiå“¥çš„å¥³æœ‹å‹æ¥å•¦ï¼</title>
    <style>
        body {
            background-color: #f0faff;
            font-family: "Microsoft YaHei", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
        }
        .bg-penguin { position: fixed; font-size: 24px; opacity: 0.2; z-index: -1; user-select: none; }
        .container {
            background: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 10;
            width: 90%;
            max-width: 550px;
            border: 2px solid #c3e6cb;
        }
        h1 { color: #ff6b6b; font-size: 1.6rem; margin-bottom: 20px; }
        button {
            padding: 12px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 50px;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-no { background-color: #4dabf7; color: white; }
        .btn-yes { background-color: #ff8787; color: white; }
        
        #moving-yes { position: absolute; z-index: 100; transition: all 0.1s ease; }
        /* ç¬¬äºŒå…³ï¼šå¦æŒ‰é’®ç°åœ¨æ¢å¤ pointer-eventsï¼Œå¯ä»¥ç‚¹å‡» */
        #sticky-no { position: fixed; z-index: 1000; white-space: nowrap; }

        .footer { position: fixed; bottom: 15px; color: #868e96; font-size: 0.9rem; }
        .modal {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border: 4px solid #ff8787;
            border-radius: 20px;
            display: none;
            z-index: 2000;
        }
        input { padding: 8px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>

<script>
    for(let i=0; i<25; i++) {
        const div = document.createElement('div');
        div.className = 'bg-penguin';
        div.innerText = 'ğŸ§';
        div.style.left = Math.random() * 100 + 'vw';
        div.style.top = Math.random() * 100 + 'vh';
        document.body.appendChild(div);
    }
</script>

<div id="stage1" class="container">
    <div style="font-size:50px">ğŸ§</div>
    <h1>ä¸€ã€duoiå“¥çš„å¥³æœ‹å‹æ˜¯å¦è¦æ‰“æˆ‘ï¼Ÿ</h1>
    <button class="btn-no" onclick="win()">å¦</button>
    <button id="moving-yes" class="btn-yes" onclick="goStage(2)">æ˜¯</button>
</div>

<div id="stage2" class="container" style="display:none;">
    <div style="font-size:50px">ğŸ’¢ğŸ§</div>
    <h1>äºŒã€duoiå“¥çš„å¥³æœ‹å‹æ˜¯å¦è¦æ‰“æˆ‘ï¼Ÿ</h1>
    <button id="sticky-no" class="btn-no" onclick="win()">å¦</button>
    <button class="btn-yes" onclick="goStage(3)">æ˜¯</button>
</div>

<div id="stage3" class="container" style="display:none;">
    <div style="font-size:50px">ğŸğŸ§</div>
    <h1>ä¸‰ã€duoiå“¥çš„å¥³æœ‹å‹æ˜¯å¦è¦æ‰“æˆ‘ï¼Ÿ</h1>
    <button class="btn-no" onclick="showInputModal()">A.å¦ï¼Œä½†æ˜¯duoiduoiç»™ä½ 150æ¸¯å¸</button>
    <button class="btn-yes" onclick="goStage(4)">B.æ˜¯</button>
</div>

<div id="stage4" class="container" style="display:none;">
    <div style="font-size:50px">ğŸ•µï¸â€â™‚ï¸ğŸ§</div>
    <h1>å››ã€duoiå“¥çš„å¥³æœ‹å‹æ˜¯å¦è¦æ‰“æˆ‘ï¼Ÿ</h1>
    <p style="color:#888">(å¦æŒ‰é’®å·²ç»è¢«duoiduoiè—èµ·æ¥äº†)</p>
    <button class="btn-no" onclick="win()">æ˜¯</button>
</div>

<div id="inputModal" class="modal">
    <p>å¤ªæ£’äº†ï¼duoiduoiåšè¿™ä¸ªç½‘é¡µåºŸäº†å¾ˆå¤§çš„å¿ƒæ€ï¼Œ<br>è¯·è¯´ä¸€å¥<b>â€duoiduoiåšhtmlå¹¸è‹¦äº†â€œ</b></p>
    <button onclick="closeModal()" style="background:#eee">è¿”å›</button>
    <br>
    è¾“å…¥ï¼š<input type="text" id="thankText">
    <button onclick="checkThanks()" class="btn-no">æäº¤</button>
</div>

<div id="finalWin" class="container" style="display:none;">
    <h1>å¤ªæ£’äº†ï¼</h1>
    <div id="qrArea" style="display:none;">
        <p>è°¢è°¢ä½ ï¼è¯·æ‰«äºŒç»´ç é¢†å–çº¢åŒ…ã€‚</p>
        <img src="ä»˜æ¬¾ç .jpg" style="max-width:250px; border:5px solid white;">
    </div>
    <div style="font-size:40px">ğŸ§âœ¨ğŸ‰</div>
</div>

<div class="footer">é¡µé¢ç”±æ—æ€æˆåˆ¶ä½œ</div>

<script>
    let mouseX = 0, mouseY = 0, lastX = 0, lastY = 0;
    let isSticking = false, stage = 1;

    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        if (stage === 2 && isSticking) {
            let speed = Math.sqrt(Math.pow(mouseX - lastX, 2) + Math.pow(mouseY - lastY, 2));
            // ç”©é¼ æ ‡é€»è¾‘ï¼šå¦‚æœé€Ÿåº¦å¤Ÿå¿«ï¼Œæš‚æ—¶è§£ç»‘
            if (speed > 85) {
                isSticking = false;
            } else {
                const btn = document.getElementById('sticky-no');
                // æŒ‰é’®ä¸­å¿ƒå¯¹é½é¼ æ ‡
                btn.style.left = (mouseX - btn.offsetWidth / 2) + 'px';
                btn.style.top = (mouseY - btn.offsetHeight / 2) + 'px';
            }
        }
        lastX = mouseX; lastY = mouseY;
    });

    const movingYes = document.getElementById('moving-yes');
    let missCount = 0;
    movingYes.addEventListener('mouseenter', () => {
        missCount++;
        if (missCount > 5) {
            movingYes.style.left = '50%'; movingYes.style.top = '70%';
            movingYes.innerText = "æ˜¯ï¼šâ€œæˆ‘ç´¯äº†â€";
        } else {
            const corners = [{t:'5%',l:'5%'}, {t:'85%',l:'85%'}, {t:'5%',l:'85%'}, {t:'85%',l:'5%'}];
            let pos = corners[missCount % 4];
            movingYes.style.top = pos.t; movingYes.style.left = pos.l;
        }
    });

    function goStage(n) {
        stage = n;
        document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
        document.getElementById('stage' + n).style.display = 'block';
        if (n === 2) {
            isSticking = true;
            const btn = document.getElementById('sticky-no');
            btn.style.display = 'inline-block';
            btn.style.left = mouseX + 'px'; btn.style.top = mouseY + 'px';
        } else {
            isSticking = false;
            document.getElementById('sticky-no').style.display = 'none';
        }
    }

    // å½“é¼ æ ‡é‡æ–°åˆ’å…¥â€œå¦â€æŒ‰é’®ï¼Œå®ƒåˆä¼šç²˜ä¸Šæ¥
    document.getElementById('sticky-no').addEventListener('mouseenter', () => {
        if (stage === 2) isSticking = true;
    });

    function win() {
        stage = 0;
        document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
        document.getElementById('sticky-no').style.display = 'none';
        document.getElementById('finalWin').style.display = 'block';
    }

    function showInputModal() { document.getElementById('inputModal').style.display = 'block'; }
    function closeModal() { document.getElementById('inputModal').style.display = 'none'; }
    function checkThanks() {
        if (document.getElementById('thankText').value === "duoiduoiåšhtmlå¹¸è‹¦äº†") {
            closeModal(); win(); document.getElementById('qrArea').style.display = 'block';
        } else { alert("è¦å†™å¯¹å­—å“¦ï¼"); }
    }
</script>
</body>
</html>